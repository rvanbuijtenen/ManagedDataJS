{
	"name": "machine",
	"type": "object",
	"properties": {
		"name": {"type": "string"},
		"start": {"$ref": "#/definitions/state"},
		"states": {
			"type": "array",
			"items": {"$ref": "#/definitions/state"}
		}
	},
	"definitions": {
		"state": {
			"properties": {
				"name": {"type": "string"},
				"transitions_in": {
					"type": "array",
					"items": {"$ref": "#/definitions/transition"}
				},
				"transitions_out": {
					"type": "array",
					"items": {"$ref": "#/definitions/transition"}
				},
				"belongs_to":{
					"$ref": "#",
					"inverse": "states"
				}
			}
		},
		"transition": {
			"properties": {
				"event": {
					"type": "array",
					"items": {"type": "string"}
					},
				"from": {
					"$ref": "#/definitions/state",
					"inverse": "transitions_out"
				},
				"to": {
					"$ref": "#/definitions/state",
					"inverse": "transitions_in"
				}
			}
		}
	}
}