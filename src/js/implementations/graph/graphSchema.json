{
	"name": "Graph",
	"properties": {
		"lines": {
			"type": "array",
			"items": {"type": "object", "$ref": "#/definitions/Line"}
		},
		"name": {"type": "string"}
	},
	"definitions": {
		"Line": {
			"properties": {
				"points": {
					"type": "array",
					"items": {"oneOf": [
						{"type": "object", "$ref": "#/definitions/LinearPoint"}, 
						{"type": "object", "$ref": "#/definitions/QuadraticPoint"}, 
						{"type": "object", "$ref": "#/definitions/BezierPoint"}
					]}
				},
				"start": {"type": "object", "$ref": "#/definitions/Point"},
				"color": {"enum": ["black", "green", "blue", "red"]},
				"width": {
					"type": "integer",
					"minimum": 1,
					"maximum": 10
				},
				"belongs_to": {"type": "object", "$ref": "#", "inverse": "lines"}
			}
		},
		"Point": {
			"properties": {
				"x": {"type": "number"},
				"y": {"type": "number"}
			}
		},
		"LinearPoint": {
			"properties": {
				"end": {"type": "object", "$ref": "#/definitions/Point"},
				"belongs_to": {"type": "object", "$ref": "#/definitions/Line", "inverse": "points"}
			}
		},
		"QuadraticPoint": {
			"properties": {
				"cp": {"type": "object", "$ref": "#/definitions/Point"},
				"end": {"type": "object", "$ref": "#/definitions/Point"},
				"belongs_to": {"type": "object", "$ref": "#/definitions/Line", "inverse": "points"}
			}
		},
		"BezierPoint": {
			"properties": {
				"cp1": {"type": "object", "$ref": "#/definitions/Point"},
				"cp2": {"type": "object", "$ref": "#/definitions/Point"},
				"end": {"type": "object", "$ref": "#/definitions/Point"},
				"belongs_to": {"type": "object", "$ref": "#/definitions/Line", "inverse": "points"}
			}
		}
	}
}